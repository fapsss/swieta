# -*- coding: utf-8 -*-
"""Kopia notatnika mikoaj.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/10KL45Ml9lzOJ0kocHQ9E7_Xii9ZUfUFg
"""

import streamlit as st
from svg_turtle import SvgTurtle
import random

# Tytu aplikacji
st.title(" Mikoaj rysowany w Pythonie")
st.caption("Generowanie obrazu wektorowego (SVG) przy u偶yciu logiki Turtle.")

# --- Funkcje pomocnicze (zmodyfikowane, aby przyjmoway obiekt 't') ---

def skok(t, x, y):
    """Przenosi 偶贸wia bez rysowania"""
    t.penup()
    t.goto(x, y)
    t.pendown()

def rysuj_kolo(t, kolor, promien, x, y):
    """Rysuje wypenione koo"""
    skok(t, x, y - promien)
    t.color(kolor)
    t.fillcolor(kolor)
    t.begin_fill()
    t.circle(promien)
    t.end_fill()

def rysuj_prostokat(t, kolor, w, h, x, y):
    """Rysuje prostokt od lewego g贸rnego rogu"""
    skok(t, x, y)
    t.color(kolor)
    t.fillcolor(kolor)
    t.begin_fill()
    for _ in range(2):
        t.forward(w)
        t.right(90)
        t.forward(h)
        t.right(90)
    t.end_fill()

def rysuj_tlo(t, szerokosc, wysokosc, kolor):
    """Rysuje to jako du偶y prostokt (svg_turtle ma domylnie przezroczyste)"""
    skok(t, -szerokosc/2, wysokosc/2)
    t.color(kolor)
    t.fillcolor(kolor)
    t.begin_fill()
    for _ in range(2):
        t.forward(szerokosc)
        t.right(90)
        t.forward(wysokosc)
        t.right(90)
    t.end_fill()

# --- G贸wna logika rysowania ---
def generuj_obraz():
    # Inicjalizacja 偶贸wia SVG (wymiary 600x600)
    t = SvgTurtle(600, 600)

    # 1. Rysowanie ta (niebo)
    rysuj_tlo(t, 600, 600, "#87CEEB")

    # 2. Podoga (nieg na ziemi)
    rysuj_prostokat(t, "white", 600, 150, -300, -150)

    # --- Rysowanie Mikoaja ---
    # Ciao (czerwone)
    rysuj_kolo(t, "red", 60, 0, -50)

    # Biay pasek na rodku paszcza
    rysuj_prostokat(t, "white", 10, 120, -5, 50)

    # Pasek (czarny)
    rysuj_prostokat(t, "black", 130, 10, -65, -50)
    # Klamra paska (偶贸ta)
    rysuj_prostokat(t, "gold", 14, 14, -7, -48)

    # Gowa (cielista)
    rysuj_kolo(t, "#FFCC99", 30, 0, 60)

    # Oczy
    rysuj_kolo(t, "black", 3, -10, 75)
    rysuj_kolo(t, "black", 3, 10, 75)

    # Nos
    rysuj_kolo(t, "red", 4, 0, 65)

    # Broda
    locations = [(-25, 50), (-15, 45), (0, 40), (15, 45), (25, 50),
                 (-10, 35), (10, 35), (0, 30)]
    for lx, ly in locations:
        rysuj_kolo(t, "white", 8, lx, ly)

    # Czapka
    skok(t, -35, 85)
    t.color("red")
    t.fillcolor("red")
    t.begin_fill()
    t.goto(35, 85)
    t.goto(0, 140)
    t.goto(-35, 85)
    t.end_fill()

    # Biae futerko czapki
    rysuj_prostokat(t, "white", 80, 15, -40, 95)
    # Pompon
    rysuj_kolo(t, "white", 8, 0, 140)

    # --- Rysowanie Prezent贸w ---
    prezenty = [
        (-100, -160, "green", "gold"),
        (80, -160, "purple", "yellow"),
        (130, -170, "blue", "red")
    ]

    for px, py, p_kolor, w_kolor in prezenty:
        # Pudeko
        rysuj_prostokat(t, p_kolor, 40, 40, px, py)
        # Wst偶ka pionowa
        rysuj_prostokat(t, w_kolor, 8, 40, px + 16, py)
        # Wst偶ka pozioma
        rysuj_prostokat(t, w_kolor, 40, 8, px, py - 16)

    # --- Padajcy nieg ---
    for _ in range(30):
        x = random.randint(-280, 280)
        y = random.randint(-280, 280)
        if y > -100:
            rysuj_kolo(t, "white", 2, x, y)

    # Zapisz wynik do pliku SVG
    filename = "mikolaj.svg"
    t.save_as(filename)
    return filename

# Przycisk do generowania (odwie偶a losowanie niegu)
if st.button('Namaluj Mikoaja '):
    with st.spinner('Mikoaj si rysuje...'):
        plik_svg = generuj_obraz()
        st.image(plik_svg, width=600)
        st.success("Wesoych wit!")
else:
    st.info("Kliknij przycisk, aby wygenerowa obrazek.")